const { STUDENT, HEALTHCARE_PROVIDER } = require('../config').ROLES;

const STATUSES = {
    REGISTERED: 'REGISTERED',
    CONFIRMED_BY_STUDENT: 'CONFIRMED_BY_STUDENT',
    CONFIRMED: 'CONFIRMED',
    FINISHED_BY_STUDENT: 'FINISHED_BY_STUDENT',
    FINISHED_BY_HEALTHCARE_PROVIDER: 'FINISHED_BY_HEALTHCARE_PROVIDER',
    FINISHED: 'FINISHED',
};

const ACTIONS = {
    SHARE_TOKEN: 'SHARE_TOKEN',
    CONFIRM_OPPONENT: 'CONFIRM_OPPONENT',
    FINISH: 'FINISH',
};

const STATUS_ROLE_ACTION = {};

STATUS_ROLE_ACTION[STATUSES.REGISTERED] = {};
STATUS_ROLE_ACTION[STATUSES.REGISTERED][STUDENT] = [ACTIONS.CONFIRM_OPPONENT];

STATUS_ROLE_ACTION[STATUSES.CONFIRMED_BY_STUDENT] = {};
STATUS_ROLE_ACTION[STATUSES.CONFIRMED_BY_STUDENT][STUDENT] = [ACTIONS.SHARE_TOKEN];
STATUS_ROLE_ACTION[STATUSES.CONFIRMED_BY_STUDENT][HEALTHCARE_PROVIDER] = [ACTIONS.CONFIRM_OPPONENT];

STATUS_ROLE_ACTION[STATUSES.CONFIRMED] = {};
STATUS_ROLE_ACTION[STATUSES.CONFIRMED][STUDENT] = [ACTIONS.FINISH];
STATUS_ROLE_ACTION[STATUSES.CONFIRMED][HEALTHCARE_PROVIDER] = [ACTIONS.FINISH];

STATUS_ROLE_ACTION[STATUSES.FINISHED_BY_HEALTHCARE_PROVIDER] = {};
STATUS_ROLE_ACTION[STATUSES.FINISHED_BY_HEALTHCARE_PROVIDER][STUDENT] = [ACTIONS.FINISH];

STATUS_ROLE_ACTION[STATUSES.FINISHED_BY_STUDENT] = {};
STATUS_ROLE_ACTION[STATUSES.FINISHED_BY_STUDENT][HEALTHCARE_PROVIDER] = [ACTIONS.FINISH];

module.exports = {
    STATUSES,
    ACTIONS,
    STATUS_ROLE_ACTION,
};
